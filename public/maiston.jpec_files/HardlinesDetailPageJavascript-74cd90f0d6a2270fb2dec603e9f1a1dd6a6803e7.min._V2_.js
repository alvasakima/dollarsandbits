(function(h){h.execute(function(){h.when("A","jQuery","atf").register("accordionBuyBoxJS",function(c,a){var b={updateCssClass:function(c){var b=a("#rbbContainer");b.find(".selected .a-icon-radio-active").removeClass("a-icon-radio-active").addClass("a-icon-radio-inactive");b.find(".selected .offer-price").removeClass("a-color-price").addClass("a-color-secondary");c.parents(".rbbSection").removeClass("unselected").addClass("selected");c.parents(".rbbSection").toggleClass("dp-accordion-active",500);
c.find(".a-icon-radio-inactive").removeClass("a-icon-radio-inactive").addClass("a-icon-radio-active");c.find(".offer-price").removeClass("a-color-secondary").addClass("a-color-price");a("#rbbContainer .rbbSection .rbbContent").find(".offer-price").removeClass("a-color-secondary").addClass("a-color-price")},animate:function(c){var b=a("#rbbContainer"),i=c.attr("id"),g,d;b.find(".rbbSection").each(function(c,b){a(b).find(".rbbHeader")[0].id==i?g=a(b):a(b).hasClass("selected")&&(d=a(b))});d.find(".rbbContent").slideUp(500,
function(){d.removeClass("selected").addClass("unselected");d.toggleClass("dp-accordion-active",500)});g.find(".rbbContent").slideDown(500);a.browser.msie&&parseInt(a.browser.version,10)==7&&(g.find(".rbbContent").css("display","inline"),setTimeout(function(){g.find(".rbbContent").css("display","block")},505))},oneClickJS:function(){a("#one-click-button, #one-click-button-ubb").click(function(){var b="https://"+window.location.host+a("#addToCart").attr("action");a("#addToCart").attr("action",b);return!0})},
usedBuyBoxJS:function(){a("#one-click-button-ubb, #usedbuyBox #add-to-cart-button-ubb").click(function(){var b=a("#addToCart"),c=b.attr("action").replace("ref=dp_start-bbf_1_glance","ref=dp_start-ubbf_1_glance");b.attr("action",c);return!0});amznJQ.available("popover",function(){a("#usedItemConditionInfoLink").amazonPopoverTrigger({showCloseButton:!1,closeEventInclude:["CLICK_TRIGGER","CLICK_OUTSIDE","MOUSE_LEAVE"],locationElement:a("#usedItemConditionInfoLink"),location:"bottom",width:250,localContent:"#usedItemConditionInfoPopover"})})},
initialize:function(){a(".rbbHeaderLink").attr("href","javascript:void(0);");a("#rbbContainer .rbbSection.unselected .dp-accordion-inner").hide();a("#rbbContainer .rbbSection .rbbHeader").click(function(c){a(c.target);c=a(this);c=c.hasClass("rbbHeader")?c:c.parents(".rbbHeader");if(c.parents(".rbbSection").hasClass("selected"))return!1;b.updateCssClass(c);a("#abbWrapper [id^=mbb-offeringID-]").each(function(){this.checked=!1});c=a(this);b.animate(c);return!0});b.oneClickJS();b.usedBuyBoxJS()}};return b});
h.when("A","jQuery","a-dropdown").execute(function(c,a,b){function f(a){return a?a.replace(/&#0/g,"&#"):undef}function e(a){for(var c=a.getOptions(),c=c?c.size():0,b=1;b<c;b++)a.removeOption(1)}function j(c,b){var d=c.getOption(0),i=d.info()[0];d.remove();a.each(b,function(a,b){c.addOption({text:u[f(b)],value:b,css_class:"dropdownAvailable"},1)});c.addOption(i,0);c.val(i.value)}function g(a){n=a.value;e(l);n!=="-1"&&(d(),j(l,Object.keys(r[f(n)])))}function d(){if(!Object.keys)Object.keys=function(){var a=
Object.prototype.hasOwnProperty,c=!{toString:null}.propertyIsEnumerable("toString"),b="toString,toLocaleString,valueOf,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,constructor".split(","),f=b.length;return function(d){if(typeof d!=="object"&&(typeof d!=="function"||d===null))throw new TypeError("Object.keys called on non-object");var i=[],e;for(e in d)a.call(d,e)&&i.push(e);if(c)for(e=0;e<f;e++)a.call(d,b[e])&&i.push(b[e]);return i}}()}function h(a){p=a.value;if(!(p==="-1"||n==="-1"))window.location=
s[r[f(n)][f(p)]]}function t(a){a=a.value;if(a!=="-1")window.location=s[f(a)]}var r,m=c.state("dcdMetaData");if(m){var s=m.asinToDetailPageURLMap,u=m.truncatedValuesMap,o=m.dimensionKeys,q=o[0],n=-1,p=-1,l;o.length===2?(r=m.doubleValuesToAsinMap,m=o[1],o=b.getSelect("native_dcd_dropdown_"+q),l=b.getSelect("native_dcd_dropdown_"+m),o.setValue("-1"),l.setValue("-1"),e(l),c.on("a:dropdown:selected:"+q,g),c.on("a:dropdown:selected:"+m,h)):(o=b.getSelect("native_dcd_dropdown_"+q),(b=m.selectedAsin)?o.setValue(b):
o.setValue("-1"),c.on("a:dropdown:selected:asin-redirect",t))}});h.when("A","jQuery").register("product-description-fix",function(b,a){return{fixTableIssue:function(){a("#productDescription .productDescriptionWrapper table").each(function(){var b=a(this).attr("width");typeof b!=="undefined"?a(this).css("width",b):a(this).css("width","auto")})}}});var b=window.finders?window.finders:{};amznJQ.available("jQuery",function(){jQuery.extend(b,{clearElement:function(b){b=b.jquery?b[0]:b;b.disabled=!0;b.options.length=
1},getNodeId:function(c){var a=jQuery(jQuery.map(b.data.itemElems,function(a){return"#"+a}).join(",")).map(function(){return jQuery(this).val()}).get();c||(c=jQuery.inArray("",a),c>=0&&(a=a.slice(0,c)));return a},getItemElements:function(){return jQuery(jQuery.map(b.data.itemElems,function(b){return"#"+b}).join(","))},getModelsElement:function(){return jQuery("#"+b.data.modelsElem)},showDeviceFinder:function(){b.state.showing="finder";jQuery("#findDevicePanel").removeClass("showing-found-device");
jQuery("#finderItFitsWidget").removeClass("showing-my-devices").addClass("showing-finder")},showFoundDevice:function(){b.state.showing="found-device";jQuery("#findDevicePanel").addClass("showing-found-device");jQuery("#finderItFitsWidget").removeClass("showing-my-devices").addClass("showing-finder")},showMyDevices:function(){b.state.showing="my-devices";jQuery("#finderItFitsWidget").removeClass("showing-finder").addClass("showing-my-devices")},enableGoButton:function(){var c=b.getModelsElement().val(),
a=jQuery("#finderUpdateButton");c==0?(a.addClass("disabled"),a[0].disabled=!0):(a.removeClass("disabled"),a[0].disabled=!1)},onModelsChange:function(){b.enableGoButton()},loadModels:function(c){var a=b.getModelsElement();b.clearElement(a);c&&jQuery.getJSON("/gp/finders/ajax/finderajax.html",{action:"getLeafNodes",finderId:b.data.id,nodeId:c.join("^"),PowerBar:0},function(b){if(b&&b.length!==void 0){var c=[];c.push(a[0].innerHTML);for(var e=0;e<b.length;e++)c.push('<option value="'+b[e].replace(/&/g,
"&amp;")+'"'),c.push(">"+b[e]+"</option>");a[0].disabled=!1;jQuery.browser.msie?(a[0].options.length=0,b=a[0].outerHTML,b=b.match(/(.+?)>.*<\/select>/i)[1],a[0].outerHTML=b+' onchange="finders.onModelsChange(this)">'+c.join("")+"</select>"):a[0].innerHTML=c.join("")}})},onDropDownChange:function(c){b.userAction=!0;var a=b.getItemElements(),c=jQuery.inArray(c.id,b.data.itemElems);if(c!=-1){a.slice(c+1).each(function(){b.clearElement(this)});var i=!1,f=b.getNodeId();f.length==a.length&&(i=!0);if(c+
1<a.length&&f.length>0){var e=a.eq(c+1);jQuery.getJSON("/gp/finders/ajax/finderajax.html",{action:"getAttrNodes",finderId:b.data.id,nodeId:f.join("^"),PowerBar:0},function(a){if(a.length!==void 0)if(a.length>0){e[0].disabled=!1;for(var c=0;c<a.length;c++)jQuery('<option value="'+a[c].replace(/&/g,"&amp;")+'">'+a[c]+"</option>").appendTo(e)}else f.push(""),b.loadModels(f)})}b.loadModels(i?f:null);b.enableGoButton()}},renderDeviceMatch:function(b){var a=jQuery('<div class="finder-device-match"></div>').append(b.image).append(jQuery("<div></div>").append(b.title));
b.finderLink&&a.append(jQuery('<div class="finder-carat-link"></div>').append(b.finderLink));a.append('<div class="finders-clearfix">&nbsp;</div>');return a},updateFoundModel:function(c,a){c=c||b.getModelsElement().val();a=a||b.getNodeId(!0);b.state.selectedModel=c;b.state.nodeId=a;if(c!=0)b.loadingDeviceElem===void 0?b.loadingDeviceElem=jQuery("#loadingDevicePanel"):(jQuery("#foundPanel .finder-device-match").remove(),jQuery("#foundPanel").prepend(b.loadingDeviceElem)),b.showFoundDevice(),a.push(c),
jQuery.getJSON("/gp/finders/ajax/finderajax.html",{action:"getDeviceMatch",finderId:b.data.id,supplyASIN:b.data.supply,nodeId:a.join("^"),PowerBar:0},function(a){jQuery("#loadingDevicePanel").remove();a&&a.length&&b.renderDeviceMatch(a[0]).prependTo(jQuery("#foundPanel"))})},updateMyDevices:function(){if(b.data.myDevices.length>0){for(var c=[],a=0;a<b.data.myDevices.length;a++)c.push(b.data.myDevices[a].asin+";"+b.data.myDevices[a].id);jQuery.get("/gp/finders/ajax/finderajax.html",{action:"getMyDevicesMatches",
finderId:b.data.id,supplyASIN:b.data.supply,myDevices:c.join(":"),PowerBar:0},function(a){if(a&&a.length){a.sort(function(a,b){return a.isCompatible!=b.isCompatible?a.isCompatible=="1"?-1:1:-1});for(var c=jQuery("#finderMyDevicesPanel .finder-scroll-panel").empty(),e=0;e<a.length;e++){var j=b.renderDeviceMatch(a[e]).appendTo(c);e>0&&j.addClass("finder-secondary-device")}}},"json")}},init:function(c){typeof c==="string"&&(c=eval("("+c+")"));b.data=c;b.userAction=!1;jQuery(".finder-dd").each(function(){this.disabled=
this.options.length===1});b.state?b.state.showing=="found-device"?b.updateFoundModel(b.state.selectedModel,b.state.nodeId):b.state.showing=="finder"?b.showDeviceFinder():b.state.showing=="my-devices"&&b.showMyDevices():b.state={};b.updateMyDevices();c=function(){b.userAction||jQuery(".finder-dd").each(function(){jQuery(this).val("")})};c();jQuery(window).load(c);b.enableGoButton();b.getItemElements().bind("change",function(){b.onDropDownChange(this)});b.getModelsElement().bind("change",function(){b.onModelsChange(this)});
jQuery("#finderUpdateButton").bind("click",function(){b.updateFoundModel();return!1});jQuery(".finder-find-device-link").bind("click",function(){b.showDeviceFinder();return!1});jQuery("#finderShowMyDevicesLink").bind("click",function(){b.showMyDevices();return!1});jQuery("#finderShowMoreDevicesLink").bind("click",function(){jQuery("#finderMyDevicesPanel").addClass("show-more-devices");return!1});jQuery("#finderHideMoreDevicesLink").bind("click",function(){jQuery("#finderMyDevicesPanel").removeClass("show-more-devices");
return!1})}});amznJQ&&amznJQ.declareAvailable&&amznJQ.declareAvailable("finderFitsJS")});h.when("A","jQuery","atf").execute(function(b,a){b.on.ready(function(){function i(b,c,d,e,f){a(b).slideToggle(300);a(c).slideToggle(300);a(d).toggleClass("tmmShowPrompt tmmHidePrompt");a(e).toggleClass("tmmShowPrompt tmmHidePrompt");a(f).toggleClass("rotate")}function f(b){b.position();b.width();a(".swatchElement");b.find(".swatchElement").each(function(){a(this).attr("data-width",a(this).width())});a("#formats").find(".a-row").removeClass("nonJSFormats")}
function e(){var b=a("#formats"),c=b.width()-40,d=0;b.find(".swatchElement").each(function(){a(this).is(":visible")&&(d+=a(this).width())});d>c?a(b.find(".swatchElement:visible").get().reverse()).each(function(){var b=0,e=!1;a(this).find(".format").hasClass("a-button-selected")?(b=a(this).prev(".swatchElement").width(),e=a(this).prev(".swatchElement").is(":hidden"),a(this).prev(".swatchElement").hide()):(b=a(this).width(),e=a(this).is(":hidden"),a(this).hide());e||(d-=b);return d>c}):d<c&&b.find(".swatchElement").each(function(){if(a(this).is(":hidden"))return a(this).attr("data-width")<=
c-d&&a(this).show(),!1})}var j=0,g;amznJQ.available("DPClientLogger",function(){typeof window.DPClientLogger!="undefined"&&(g=new window.DPClientLogger.ImpressionLogger("dpbxapps","bxapps-atfMarker",!0,!0))});b.declarative("tmm-see-more-editions-click",["click"],function(d){var e=d.data,f=e.metabindingUrl;if(!d.$target.hasClass("a-link-expander")&&!d.$target.parent().hasClass("a-link-expander")){if(f!=="#")window.location=f}else{var e=e.metabindingPlaceHolder,g="#metabinding_row_top_"+e,h="#metabinding_row_bottom_"+
e,j="#editionsSeePrompt_"+e,q="#editionsHidePrompt_"+e,n="#editionsIcon_"+e,p="isAjaxComplete_"+e,l="isAjaxInProgress_"+e,d="#tmmSpinnerDiv_"+e,k=b.state("mediamatrix-state"),e=k["url_"+e].replace(/&amp;/g,"&");a("#formats .tmmErrorClass").hide();k[p]==="1"||k[l]==="1"?i(g,h,j,q,n):(b.ajax(e,{method:"get",success:function(){k[p]="1";b.state("mediamatrix-state",k);i(g,h,j,q,n)},indicator:a(d),error:function(){a($tmmErrorDiv).show();k[l]="0";b.state("mediamatrix-state",k)}}),k[l]="1",b.state("mediamatrix-state",
k))}});a("#formats > .a-link-expander").click(function(){i("#tmmSwatches","#twister","#showMoreFormatsPrompt","#hideMoreFormatsPrompt","#formatsIcon");g&&a("#twister").is(":visible")&&!j&&(g.logImpression("tmm-show-more-formats-viewed"),j=1)});var d=b.state("mediamatrix-state"),h="1";typeof d!=="undefined"&&typeof d.isDvdWeblabEnabled!=="undefined"&&d.isDvdWeblabEnabled==="1"&&(h="0");h==="1"&&(a("#formats.responsive").each(function(){f(a(this))}),e(),b.on("resize",e));a("#formats .unselected .format").mouseenter(function(){a(this).find(".a-color-secondary").addClass("a-color-price").removeClass("a-color-secondary")}).mouseleave(function(){a(this).find(".a-color-price").addClass("a-color-secondary").removeClass("a-color-price")});
a("#landingItemRentalLink").attr("href","javascript:document.getElementById('rentBuySection').click();")})});h.when("A","jQuery","atf").execute(function(b,a){function h(){var b=parseInt(a("#byline").width()),c=0;a("#byline .author").each(function(){a(this).is(".notFaded")&&(c+=a(this).outerWidth())});c+=a("#byline .more").outerWidth();if(c>b){var j=a("#byline .author.notFaded").length;a(a("#byline .author.notFaded").get().reverse()).each(function(d){c>b&&d<j-1&&(d=a(this).width(),a(this).removeClass("notFaded"),
a(this).fadeOut(10,function(){a(this).hide()}),c-=d,a("#byline .moreCount").html(a("#byline .author").length-a("#byline .author.notFaded").length),a("#byline .more").addClass("notFaded").fadeIn(10))})}else if(c<b&&a("#byline .author.notFaded").length<a("#byline .author").length){var g=b-c;a("#byline .author").each(function(){if(!a(this).hasClass("notFaded")){var b=a(this).outerWidth();b<=g?(g-=b,a(this).addClass("notFaded").fadeIn(10),b=a("#byline .author").length-a("#byline .author.notFaded").length,
b===0?a("#byline .more").removeClass("notFaded").fadeOut(10):(a("#byline .moreCount").html(b),a("#byline .more").addClass("notFaded").fadeIn(10))):g=0}})}}a("#byline .showMoreLink").click(function(){a("#byline .author").each(function(){a(this).hasClass("notFaded")||a(this).addClass("notFaded").fadeIn(0);a("#byline .more").removeClass("notFaded").fadeOut(0)});return!1});a("#byline .contributorNameID").mouseenter(function(){var f=a(this).attr("data-asin"),e={},h="isAjaxComplete_"+f,g="isAjaxInProgress_"+
f,d=b.state("popoverImage-state");e.entityID=f;d[h]!=="1"&&d[g]!=="1"&&(a.ajax({url:"/gp/product/utility/by-line/book-contributor-details/ajax/author-image.html",data:e,dataType:"html",timeout:1E3,success:function(e){a("#contributorImageContainer"+f).get(0).innerHTML=e;d[h]="1";b.state("popoverImage-state",d)},error:function(){d[g]="0";b.state("popoverImage-state",d)}}),d[g]="1",b.state("popoverImage-state",d))});(function(b){var c=parseInt(b.width()),h=parseInt(b.find(".more").outerWidth()),g=0;
a("#byline .author").each(function(){a(this).is(".notFaded")&&(g+=a(this).outerWidth())});a("#byline .more").attr("data-width",h);var d=c-h;if(d>g)b.find(".author").each(function(){var b=a(this).index();parseInt(b)>=3?(b=a(this).outerWidth(),a(this).attr("data-width",b),b<d?(d-=b,a(this).addClass("notFaded"),a(this).fadeIn("slow")):(d=0,a(this).fadeOut("slow"))):(b=a(this).outerWidth(),a(this).attr("data-width",b),d-=b)});else{var i=a("#byline .author.notFaded").length;a(a("#byline .author.notFaded").get().reverse()).each(function(b){d<
g&&b<i-1&&(b=a(this).outerWidth(),g-=b,a(this).fadeOut("slow").removeClass("notFaded"))})}c=b.find(".author").length-b.find(".author.notFaded").length;c>0&&(b.find(".moreCount").html(c),b.find(".more").fadeIn("slow"),b.find(".more").addClass("notFaded"))})(b.$("#byline"));a(window).resize(function(){h()})})})})(function(){var h=window.AmazonUIPageJS||P,b=h.attributeErrors;return b?b("HardlinesDetailPageJavascript"):h}());